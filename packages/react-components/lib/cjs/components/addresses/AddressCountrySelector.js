"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AddressCountrySelector=void 0;const tslib_1=require("tslib"),jsx_runtime_1=require("react/jsx-runtime"),react_1=require("react"),BaseSelect_1=tslib_1.__importDefault(require("../utils/BaseSelect")),BillingAddressFormContext_1=tslib_1.__importDefault(require("../../context/BillingAddressFormContext")),ShippingAddressFormContext_1=tslib_1.__importDefault(require("../../context/ShippingAddressFormContext")),countryStateCity_1=require("../../utils/countryStateCity"),CustomerAddressFormContext_1=tslib_1.__importDefault(require("../../context/CustomerAddressFormContext"));function AddressCountrySelector(props){const{required=!0,value,name,className}=props,p=tslib_1.__rest(props,["required","value","name","className"]),billingAddress=(0,react_1.useContext)(BillingAddressFormContext_1.default),shippingAddress=(0,react_1.useContext)(ShippingAddressFormContext_1.default),customerAddress=(0,react_1.useContext)(CustomerAddressFormContext_1.default),[hasError,setHasError]=(0,react_1.useState)(!1);(0,react_1.useEffect)(()=>{var _a,_b,_c,_d,_e,_f,_g,_h,_j;return value&&billingAddress?.setValue&&billingAddress.setValue(name,value),value&&shippingAddress?.setValue&&shippingAddress.setValue(name,value),value&&customerAddress?.setValue&&customerAddress.setValue(name,value),billingAddress.errors&&(!((_b=(_a=billingAddress?.errors)===null||_a===void 0?void 0:_a[name])===null||_b===void 0)&&_b.error)&&setHasError(!0),!((_c=billingAddress?.errors)===null||_c===void 0)&&_c[name]&&hasError&&setHasError(!1),customerAddress.errors&&(!((_e=(_d=customerAddress?.errors)===null||_d===void 0?void 0:_d[name])===null||_e===void 0)&&_e.error)&&setHasError(!0),!((_f=customerAddress?.errors)===null||_f===void 0)&&_f[name]&&hasError&&setHasError(!1),shippingAddress.errors&&(!((_h=(_g=shippingAddress?.errors)===null||_g===void 0?void 0:_g[name])===null||_h===void 0)&&_h.error)&&setHasError(!0),!((_j=shippingAddress?.errors)===null||_j===void 0)&&_j[name]&&hasError&&setHasError(!1),()=>{setHasError(!1)}},[value,billingAddress?.errors,shippingAddress?.errors,customerAddress?.errors]);const errorClassName=billingAddress?.errorClassName||shippingAddress?.errorClassName||customerAddress?.errorClassName,classNameComputed=`${className??""} ${hasError&&errorClassName?errorClassName:""}`;return(0,jsx_runtime_1.jsx)(BaseSelect_1.default,Object.assign({className:classNameComputed,ref:billingAddress?.validation||shippingAddress?.validation||customerAddress?.validation,required,options:(0,countryStateCity_1.getCountries)(),name,value},p))}exports.AddressCountrySelector=AddressCountrySelector,exports.default=AddressCountrySelector;