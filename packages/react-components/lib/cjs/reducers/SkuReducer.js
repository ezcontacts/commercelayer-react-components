"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getSku=exports.skuInitialState=void 0;const tslib_1=require("tslib"),baseReducer_1=tslib_1.__importDefault(require("../utils/baseReducer")),getSdk_1=tslib_1.__importDefault(require("../utils/getSdk")),actionType=["getSkus"];exports.skuInitialState={skus:[],loading:!0,skuCodes:[]};function getSku({config,skus,dispatch,queryParams}){return tslib_1.__awaiter(this,void 0,void 0,function*(){if(!config.accessToken||skus.length===0)return;const sdk=(0,getSdk_1.default)(config);let allSkus=[];const get=yield sdk.skus.list(Object.assign(Object.assign({},queryParams),{filters:Object.assign(Object.assign({},queryParams?.filters),{code_in:skus.join(",")})}));allSkus=[...get];const meta=get.meta;if(meta.pageCount>1)for(let pageNumber=meta.currentPage+1;pageNumber<=meta.pageCount;pageNumber++){const getPage=yield sdk.skus.list(Object.assign(Object.assign({},queryParams),{filters:Object.assign(Object.assign({},queryParams?.filters),{code_in:skus.join(",")}),pageNumber}));allSkus=[...allSkus,...getPage]}dispatch({type:"getSkus",payload:{skus:allSkus,loading:!1,skuCodes:skus}})})}exports.getSku=getSku;function skuReducer(state,reducer){return(0,baseReducer_1.default)(state,reducer,actionType)}exports.default=skuReducer;